"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Parallax=function(){function e(t){_classCallCheck(this,e),this.items=[],this.activeItems=[],this.scrollPos=0,this.windowHeight=window.innerHeight;for(var n=0;n<t.length;n++){var i={id:n,obj:t[n],speed:t[n].dataset.speed,step:0};this.items.push(i)}this.bindUIActions(),this.render()}return _createClass(e,[{key:"update",value:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e].obj.getBoundingClientRect().top,n=this.items[e].obj.getBoundingClientRect().bottom;t<this.windowHeight&&n>0?this.activeItems[this.items[e].id]=this.items[e]:this.activeItems[this.items[e].id]&&this.activeItems.splice(this.items[e].id)}}},{key:"render",value:function(){self=this,Array.prototype.forEach.call(this.activeItems,function(e){var t=e.obj.getBoundingClientRect().height/2-e.obj.getBoundingClientRect().top,n=100*t/self.windowHeight*e.speed,i="translateY("+n.toFixed(2)+"px)";e.obj.style.transform=i,e.obj.style.webkitTransform=i,e.obj.style.mozTransform=i,e.obj.style.msTransform=i}),requestAnimationFrame(this.render.bind(this))}},{key:"bindUIActions",value:function(){var e=this;window.onscroll=function(){e.scrollPos=document.documentElement.scrollTop||document.body.scrollTop,e.update()}}}]),e}(),Slider=function(){function e(t,n,i){_classCallCheck(this,e),this.wrapper=t,this.slides=n,this.speed=i,this.initSlider()}return _createClass(e,[{key:"initSlider",value:function(){var e=this;this.wrapper.bxSlider({mode:"fade",speed:0,pause:5e3,controls:!1,auto:!0,autoControls:!1,autoControlsCombine:!1,pager:!1,touchEnabled:!0,adaptiveHeight:!0,responsive:!0,onSlideBefore:function(t){e.onSlideBefore(t)},onSlideAfter:function(t){e.onSlideAfter(t)},onSliderLoad:function(){e.onSliderLoad()}})}},{key:"onSlideBefore",value:function(){TweenMax.staggerTo(".current-slide .tween-side",1,{x:"-100%",ease:Power2.easeInOut},.25),$(".pager-slider").addClass("active")}},{key:"onSlideAfter",value:function(e){$(".item-detail").removeClass("current-slide"),e.addClass("current-slide"),TweenMax.staggerTo(".current-slide .tween-side",1,{x:"0%",delay:.5,ease:Power2.easeInOut},.25),setTimeout(function(){$(".pager-slider").removeClass("active")},4e3)}},{key:"onSliderLoad",value:function(){TweenMax.staggerTo(".current-slide .tween-side",1,{x:"0%",delay:.5,ease:Power2.easeInOut},.25)}}]),e}(),app={init:function(){this.bindUI();var e=document.getElementsByClassName("parallax"),t=(new Parallax(e),$("#slider-1")),n=$(".item-detail");new Slider(t,n,0)},bindUI:function(){$("body").keypress(function(){119==event.which&&(event.preventDefault(),$("body").toggleClass("dev"))})}};app.init();
