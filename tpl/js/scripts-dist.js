"use strict";function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function(e,t,n){for(var i=!0;i;){var o=e,s=t,r=n;a=c=l=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(r)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=s,n=r,i=!0}},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Parallax=function(){function e(t){_classCallCheck(this,e),this.items=[],this.activeItems=[],this.scrollPos=0,this.windowHeight=window.innerHeight;for(var n=0;n<t.length;n++){var i={id:n,obj:t[n],speed:t[n].dataset.speed,step:0};this.items.push(i)}this.bindUIActions(),this.render()}return _createClass(e,[{key:"update",value:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e].obj.getBoundingClientRect().top,n=this.items[e].obj.getBoundingClientRect().bottom;t<this.windowHeight&&n>0?this.activeItems[this.items[e].id]=this.items[e]:this.activeItems[this.items[e].id]&&this.activeItems.splice(this.items[e].id)}}},{key:"render",value:function(){self=this,Array.prototype.forEach.call(this.activeItems,function(e){var t=e.obj.getBoundingClientRect().height/2-e.obj.getBoundingClientRect().top,n=100*t/self.windowHeight*e.speed,i="translateY("+n.toFixed(2)+"px)";e.obj.style.transform=i,e.obj.style.webkitTransform=i,e.obj.style.mozTransform=i,e.obj.style.msTransform=i}),requestAnimationFrame(this.render.bind(this))}},{key:"bindUIActions",value:function(){var e=this;window.onscroll=function(){e.scrollPos=document.documentElement.scrollTop||document.body.scrollTop,e.update()}}}]),e}(),Slider=function(){function e(t,n,i,o,s){_classCallCheck(this,e),this.wrapper=t,this.slides=n,this.speed=i,this.auto=o,this.mode=s,this.slider=null,this.initSlider(),this.bindUIActions()}return _createClass(e,[{key:"initSlider",value:function(){var e=this;this.slider=this.wrapper.bxSlider({mode:this.mode,speed:this.speed,pause:7e3,controls:!1,auto:this.auto,autoControls:!1,autoControlsCombine:!1,pager:!1,touchEnabled:!0,adaptiveHeight:!0,responsive:!0,onSlideBefore:function(t){e.onSlideBefore(t)},onSlideAfter:function(t,n,i){e.onSlideAfter(t,n,i)},onSliderLoad:function(){e.onSliderLoad()}})}},{key:"onSlideBefore",value:function(){TweenMax.staggerTo(".current-slide .tween-side",1,{x:"-100%",ease:Power2.easeInOut},.25),$(".pager-slider").addClass("active")}},{key:"onSlideAfter",value:function(e,t,n){this.sendEvent(n),this.updatePager(t,n),$(".item-detail").removeClass("current-slide"),e.addClass("current-slide"),TweenMax.staggerTo(".current-slide .tween-side",1,{x:"0%",delay:.5,ease:Power2.easeInOut},.25),setTimeout(function(){$(".pager-slider").removeClass("active")},4e3)}},{key:"onSliderLoad",value:function(){TweenMax.staggerTo(".current-slide .tween-side",1,{x:"0%",delay:.5,ease:Power2.easeInOut},.25)}},{key:"goTo",value:function(e){this.slider.goToSlide(e)}},{key:"prev",value:function(e){e.preventDefault(),this.slider.goToPrevSlide(),this.slider.stopAuto()}},{key:"next",value:function(e){e.preventDefault(),this.slider.goToNextSlide(),this.slider.stopAuto()}},{key:"updatePager",value:function(e,t){var n=document.getElementById("prev"),i=document.getElementById("next");e=parseInt(e),t=parseInt(t),n.innerHTML="0"+e,i.innerHTML="0"+t}},{key:"sendEvent",value:function(e){var t=new CustomEvent("nextSlide",{detail:{pointer:e},bubbles:!0,cancelable:!1});document.dispatchEvent(t)}},{key:"bindUIActions",value:function(){var e=document.getElementById("prev"),t=document.getElementById("next");e.addEventListener("click",this.prev.bind(this),!1),t.addEventListener("click",this.next.bind(this),!1)}}]),e}(),ScreenSlider=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"onSlideBefore",value:function(){}},{key:"onSlideAfter",value:function(){}},{key:"onSliderLoad",value:function(){}}]),t}(Slider),store,app={store:{screenSlider:""},init:function(){store=this.store,this.bindUI();var e=document.getElementsByClassName("parallax"),t=(new Parallax(e),$("#slider-1")),n=$(".item-detail"),i=(new Slider(t,n,0,!0,"fade"),$("#slider-2")),o=$(".item-screen");store.screenSlider=new ScreenSlider(i,o,1e3,!1,"fade"),document.addEventListener("nextSlide",this.updateSliders,!1)},updateSliders:function(e){var t=e.detail.pointer;store.screenSlider.goTo(t)},bindUI:function(){$("body").keypress(function(){119==event.which&&(event.preventDefault(),$("body").toggleClass("dev"))})}};app.init();
